# 블록체인 및 정보보호론강의

참고 영상 : [**박승철의블록체인및정보보호론강의**](https://www.youtube.com/
channel/UCK4MAqRJDocx
D7Rgxnt3dMg/videos)



## 15강 리플 거래

### 리플 거래의 정의

- 리플 네트워크 상에서 참여자가 리플 계좌에 변동을 만들기 위해 네트워크로 송신하는 정보
- 송신 계좌와 연계된 서병을 통해 송신자와 거래 인증



### 리플 거래의 유형

- Payment : 계좌에서 계좌로 자금 송신
- OfferCreate : 통화 교환 주문 제출
- TrustSet : 특정 외부 통화에 대한 신뢰 라인 설정
- CheckCreate : 추후 수신자의 지불 요구가 있을 때까지 연기된 지불 (수표)
- EscrowCreate : 조건이 충족될 때까지 자금 격리



### 리플의 계좌

- 공개키와 연계된 주소로 식별, 주소와 대응되는 개인키로 서명 생성
- 계좌 유보금보다 많은 금액의 XRP를 새로운 주소로 지불하는 거래 전송으로 계좌 생성
  - 계좌생성 또한 거래를 통해 만들어짐
- 거래가 송신될 때마다 계좌의 XRP 잔고로부터 수수료만큼 태워 없어짐
- 계좌의 잔고는 XRP에 대해서만 표시
- 오비 통화 잔고는 사용자 계좌와 게이트웨이 계좌의 신뢰 라인 잔고 상태 정보 형태로 리플 레저에 유지



### 신뢰 설정 거래 (TrustSet)

- 신뢰 라인
  - 상대방 계좌의 특정 외부 통화 잔고 발행에 대한 나의 계좌의 신용 한도 설정
  - 리플 계좌의 외부 통화 잔고 허용
    - 발행 게이트웨이의 IOU 이행 보증 신뢰
  - 신뢰 라인 한도까지 나의 계좌에 해당 통화 수신 허용
- 간접 신뢰 라인 : 신뢰 경로
  - 유저 1의 신뢰하는 게이트웨이 1이 게이트웨이 2를 신뢰하고 유저 2가 게이트웨이 2를 신뢰하면 유저 1과 유저 2 간에도 신뢰 경로가 생성됨 (단, 동일 통화여야함)



### 지불 거래 (Payment)

- 직접 지불
  - XRP 전자 화폐 거래 : 계좌 간에 XRP 전송
- 외부 통화 지불 거래
  - IOU 거래 (신용 거래)
  - 신뢰 라인을 따라 한도내에서 지불
  - 간접 신뢰 라인 (단, 동일 통화여야함)
  - 리플링
    - 신뢰 라인을 따라 신뢰 라인 잔고를 변경하면서 송금



### 오퍼 거래 (OfferCreate)

- 마켓 메이터(예시.환전소)에 의해 생성되어 송신
- 환율
  - TakerGets / TakerPays
- 오퍼 거래 처리
  - 환율이 높은 오퍼가 우선적으로 채택
  - TakerPays의 액수가 채워지지 않는 경우 레저에 저장
  - 신뢰 라인 설정의 의미를 내포
  - 새로운 오퍼나 지불 경로 구성 과정에서 해당 오퍼를 사용하는 지불 거래에 의해 처리
- 리플 레저에서 최적의 오퍼들을 자동으로 찾아서 지불 거래 작성